include cluster.pug
include groups.pug
include table.pug
html
  head
    title Nats Helper
    style
      include script.css
    link(rel='stylesheet', href='/cubing-icons.css')
    script
      include script.js
  body
    h1
      a(href='/' + comp.competition.id)= comp.competition.name
      = " Data Viewer"
    include error.pug
    div(id='competitionId' data-competitionId=comp.competition.id style='display:none')
    form(method='POST')
      textarea(name='script' cols=100 rows=5)= script
      br
      input(type='checkbox' name='dryrun' checked=dryrun)
      label(for='dryrun') Dry Run
      br
      input(type='submit')
    if dryrunWarning
      p
        i Note: this was a dry run, so no changes were made.
    br
    each output in outputs
      div
        if output.type == 'Error'
          pre= JSON.stringify(output.data, null, 2)
        if output.type == 'Table'
          +table(output.data)
        if output.type == 'String'
          div= output.data
        if output.type == 'Header'
          h3= output.data
        if output.type == 'ClusteringResult'
          +clusters(output.data)
        if output.type == 'GroupAssignmentResult'
          +groups(output.data)
