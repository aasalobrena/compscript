html
  head
    title Nats Helper
    style
      include table.css
    link(rel='stylesheet', href='/cubing-icons.css')
  body
    h1
      a(href='/' + comp.competition.id)= comp.competition.name
      = " Data Viewer"
    include error.pug
    div(id='competitionId' data-competitionId=comp.competition.id style='display:none')
    form(method='GET')
      span(style='width: 50px; display: inline-block') ID
      input(type='text' id='viewId' name='viewId' size=30 value=viewId)
      span(style='width: 50px; display: inline-block; padding-left: 5px') Title
      input(type='text' id='viewTitle' name='viewTitle' size=30 value=viewTitle style='margin-right: 5px')
      button(onclick='save()') Save
      div(id='saved' style='display:none; color:green') Saved!
      div(id='error' style='display:none; color:red') Error!
      br
      br
      span(style='width: 100px; display: inline-block') Table Def
      input(type='text' name='filter' size=100 value=filter id='filter' oninput='hideSaved()')
      br
      span(style='width: 100px; display: inline-block') Params
      input(type='text' name='params' size=50 value=params)
      br
      input(type='submit')
    br
    ul
      each error in errors
        li= JSON.stringify(error)
    if tableData.rows.length > 0
      table
        tr
          each header in tableData.header
            th= header
        each row in tableData.rows
          tr
            each cell in row
              td
                if cell.link
                  a(href=cell.link)= cell.value.toString()
                else
                  =cell.value.toString()
    script
      include viewer.js
